<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Terranova Luxury Homes - Demo IA</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@700&family=Playfair+Display:wght@500&family=Montserrat:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            --font-logo: 'Cormorant Garamond', serif;
            --font-headline: 'Playfair Display', serif;
            --font-body: 'Montserrat', sans-serif;
            --color-gold: #9A8B4F;
            --color-text: #F3F4F6;
            --color-text-muted: #d1d5db;
            --color-glass-green: rgba(60, 75, 50, 0.45);
            --color-glass-header: rgba(10, 15, 8, 0.85);
        }

        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            overflow: hidden; font-family: var(--font-body);
            color: var(--color-text); background-color: #000;
        }

        .background-image {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: url('background.jpg');
            background-size: cover; background-position: center;
            filter: brightness(0.4) saturate(0.8); z-index: -1;
        }

        .header {
            display: flex; justify-content: space-between; align-items: center;
            padding: 2.5rem 4rem; position: fixed; width: 100%; top: 0;
            box-sizing: border-box; z-index: 10;
        }
        .logo-container { text-align: left; }
        .logo {
            font-family: var(--font-logo); font-size: 2.5rem;
            font-weight: 700; text-transform: uppercase; letter-spacing: 3px;
            color: var(--color-gold); text-shadow: 0 0 15px rgba(154, 139, 79, 0.4);
            margin: 0;
        }
        .slogan { 
            font-size: 0.9rem; color: var(--color-text-muted); 
            margin-top: 0.5rem; letter-spacing: 1px;
        }
        .header-home { display: flex; align-items: center; gap: 0.75rem; color: var(--color-text-muted); }
        .header-home svg { width: 28px; height: 28px; stroke: var(--color-text-muted); stroke-width: 1.5; }
        .header-home span { font-size: 1.1rem; font-weight: 500; }

        .main-content {
            display: flex; align-items: center; justify-content: space-between;
            height: 100vh; padding: 0 4rem; box-sizing: border-box;
            position: relative; z-index: 5;
        }
        .text-container { max-width: 600px; text-align: left; }
        .text-container h1 {
            font-family: var(--font-headline); font-size: 3.8rem;
            font-weight: 500; margin: 0 0 1rem 0; color: var(--color-text);
        }
        .text-container p { font-size: 1.1rem; color: var(--color-text-muted); line-height: 1.7; }
        .example-list { list-style-type: none; padding-left: 0; margin-top: 1.5rem; color: #a1a1aa; }
        .example-list li { margin-bottom: 0.5rem; }

        .action-button-container {
            padding-right: 4rem;
            margin-top: 5rem;
        }
        .call-to-action {
            background-color: transparent; border: 2px solid var(--color-gold);
            color: var(--color-gold); padding: 1rem 2.5rem;
            font-family: var(--font-body); font-size: 1.1rem; font-weight: 500;
            border-radius: 50px; cursor: pointer; transition: all 0.3s ease;
        }
        .call-to-action:hover { background-color: var(--color-gold); color: #000; box-shadow: 0 0 20px rgba(154, 139, 79, 0.5); }
        
        .contact-area {
            position: fixed; bottom: 3rem; left: 4rem; z-index: 5;
            text-align: left;
        }
        .contact-area p { margin: 0 0 0.5rem 0; font-size: 0.9rem; color: var(--color-text-muted); }
        .contact-link {
            display: flex; align-items: center; gap: 0.75rem;
            text-decoration: none; color: var(--color-text-muted); transition: color 0.3s;
        }
        .contact-link:hover { color: #fff; }
        .contact-link svg { width: 24px; height: 24px; fill: currentColor; }
        .contact-link span { font-size: 1rem; font-weight: 500; }

        .action-bubbles {
            position: fixed; bottom: 3rem; right: 4rem;
            display: flex; gap: 1rem; z-index: 5; align-items: center;
        }
        .action-circle {
            height: 60px; border-radius: 30px;
            background-color: rgba(0, 0, 0, 0.5); border: 1px solid #444;
            display: flex; align-items: center; justify-content: center;
            text-decoration: none; cursor: pointer; transition: all 0.3s ease;
            padding: 0 1.2rem;
        }
        .action-circle.icon-only { width: 60px; padding: 0; }
        .action-circle span { color: #fff; font-weight: 500; margin-right: 0.75rem; }
        .action-circle svg { width: 32px; height: 32px; fill: #fff; transition: fill 0.3s; flex-shrink: 0; }
        .action-circle:hover { border-color: var(--color-gold); }
        .action-circle:hover svg, .action-circle:hover span { color: var(--color-gold); fill: var(--color-gold); }

        #chat-widget { display: block; }
        .chat-window {
            position: fixed; bottom: 3rem; right: 4rem; 
            width: 400px; height: 70vh; max-height: 600px;
            background-color: var(--color-glass-green);
            backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px);
            border-radius: 15px; z-index: 999; overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex; flex-direction: column;
            opacity: 0; transform: scale(0.5);
            transform-origin: bottom right;
            transition: opacity 0.4s ease, transform 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            pointer-events: none;
        }
        #chat-widget.active .chat-window { opacity: 1; transform: scale(1); pointer-events: auto; }
        
        .chat-header {
            padding: 1rem 1.5rem; text-align: left;
            font-weight: 600; color: var(--color-gold); 
            text-shadow: 0 0 5px rgba(154, 139, 79, 0.5);
            flex-shrink: 0; position: relative;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            background-color: var(--color-glass-header);
        }
        .chat-header-icons { position: absolute; right: 0.5rem; top: 50%; transform: translateY(-50%); display: flex; gap: 0.25rem; }
        .chat-header-icons button { background: none; border: none; cursor: pointer; padding: 0.5rem; }
        .chat-header-icons svg { width: 20px; height: 20px; fill: var(--color-text-muted); transition: fill 0.3s; }
        .chat-header-icons button:hover svg { fill: #fff; }

        .chat-messages { flex-grow: 1; padding: 1.5rem; overflow-y: auto; display: flex; flex-direction: column; gap: 1.5rem; }
        .chat-messages::-webkit-scrollbar { width: 6px; }
        .chat-messages::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.2); border-radius: 3px; }
        .message { max-width: 80%; line-height: 1.6; font-size: 0.95rem; padding: 0.8rem 1.2rem; border-radius: 18px; }
        .bot-message { align-self: flex-start; background-color: rgba(0,0,0,0.4); border-bottom-left-radius: 4px; }
        .user-message { align-self: flex-end; background-color: var(--color-gold); color: #000; font-weight: 500; border-bottom-right-radius: 4px; }

        .chat-input-area { padding: 1rem; flex-shrink: 0; border-top: 1px solid rgba(255, 255, 255, 0.1); background-color: var(--color-glass-header); }
        .input-frame { position: relative; padding: 2px; background: linear-gradient(135deg, var(--color-gold), #444); clip-path: polygon(0% 12px, 12px 0%, calc(100% - 40px) 0%, 100% 40px, 100% 100%, 0% 100%); }
        .input-frame-inner { background-color: #111; padding: 0.5rem; clip-path: polygon(0% 12px, 12px 0%, calc(100% - 40px) 0%, 100% 40px, 100% 100%, 0% 100%); display: flex; align-items: center; }
        .input-frame-inner input { flex-grow: 1; border: none; background: transparent; padding: 0.5rem; color: #fff; font-size: 1rem; font-family: var(--font-body); }
        .input-frame-inner input:focus { outline: none; }
        .input-frame-inner button { background: transparent; border: none; cursor: pointer; padding: 0.5rem; display: flex; align-items: center; justify-content: center; }
        .input-frame-inner button svg { width: 24px; height: 24px; fill: var(--color-gold); }
    </style>
</head>
<body>
    
    <div class="background-image"></div>
    
    <header class="header">
        <div class="logo-container">
            <h2 class="logo">Terranova Luxury Homes</h2>
            <p class="slogan">Venta de propiedades de lujo en el Perú y en el extranjero</p>
        </div>
        <div class="header-home" title="Inicio">
            <span>Home</span>
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h7.5" />
            </svg>
        </div>
    </header>

    <div class="main-content">
        <div class="text-container">
            <h1>Esta es una empresa ficticia</h1>
            <p>Esta página fue creada con el fin de que usted pueda ver y probar la integración de un asistente virtual a la web.</p>
            <ul class="example-list">
                <li>Pruebe a chatear con el agente. Ejemplos:</li>
                <li>- ¿Qué tipo de servicios ofrece?</li>
                <li>- ¿Qué precios tienen?</li>
                <li>- ¿Dónde se ubican sus propiedades?</li>
            </ul>
        </div>
        <div class="action-button-container">
            <button class="call-to-action" id="open-chat-main">Hablar con el Agente</button>
        </div>
    </div>
    
    <div class="contact-area">
        <p>¿Estas interesado?</p>
        <a href="https://wa.me/51992254495?text=Hola,%20quisiera%20contactar." target="_blank" class="contact-link">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12.04 2C6.58 2 2.13 6.45 2.13 11.91C2.13 13.66 2.59 15.35 3.45 16.86L2.05 22L7.31 20.6C8.75 21.41 10.36 21.85 12.04 21.85C17.5 21.85 21.95 17.4 21.95 11.94C21.95 6.48 17.5 2 12.04 2M12.04 3.64C16.57 3.64 20.29 7.36 20.29 11.89C20.29 16.42 16.57 20.14 12.04 20.14C10.46 20.14 8.95 19.73 7.64 19L7.22 18.75L4.41 19.58L5.27 16.87L5 16.44C4.22 15.06 3.79 13.5 3.79 11.91C3.79 7.38 7.51 3.64 12.04 3.64M9.13 8.26C8.93 8.26 8.76 8.28 8.61 8.54C8.46 8.8 8.03 9.73 8.03 10.89C8.03 12.05 8.63 13.12 8.78 13.3C8.93 13.47 10.15 15.22 11.95 15.93C13.41 16.53 13.81 16.42 14.12 16.38C14.63 16.3 15.24 15.75 15.46 15.15C15.68 14.55 15.68 14.04 15.6 13.9C15.52 13.77 15.37 13.71 15.12 13.59C14.87 13.47 13.8 12.96 13.58 12.88C13.36 12.8 13.21 12.74 13.06 12.99C12.91 13.24 12.5 13.75 12.38 13.89C12.26 14.03 12.14 14.04 11.91 13.96C11.45 13.8 10.6 13.54 9.61 12.63C8.81 11.91 8.31 11.03 8.19 10.81C8.07 10.59 8.2 10.45 8.31 10.33C8.41 10.23 8.54 10.06 8.66 9.92C8.78 9.78 8.83 9.68 8.91 9.52C8.99 9.36 8.94 9.24 8.88 9.12C8.82 9 8.31 7.76 8.11 7.26Z" /></svg>
            <span>Contáctame</span>
        </a>
    
    <div class="action-bubbles" id="action-bubbles">
        <a href="https://t.me/SageIA_bot" target="_blank" class="action-circle" title="Probar en Telegram">
            <span>Agente en Telegram</span>
            <svg viewBox="0 0 24 24"><path d="M11.944,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,11.944,0ZM18,7.4,15.2,18.21a.84.84,0,0,1-1.24.52L9.8,15.75,8.13,17.36a.42.42,0,0,1-.52.06L7.2,16.89a.42.42,0,0,1-.06-.52L8.6,14.7l-4.52-1.4a.84.84,0,0,1-.04-1.57L17,6.33a.84.84,0,0,1,1.15.24A.82.82,0,0,1,18,7.4Z"/></svg>
        </a>
        <div class="action-circle icon-only" id="chat-bubble-button" title="Abrir/Cerrar Chat Web">
            <svg viewBox="0 0 24 24" fill="currentColor" xmlns="http://www.w3.org/2000/svg"><path d="M20 2H4C2.9 2 2 2.9 2 4V22L6 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2ZM20 16H5.2L4 17.2V4H20V16Z"/></svg>
        </div>
    </div>

    <div id="chat-widget">
        <div class="chat-window" id="chat-window">
            <div class="chat-header">
                Sage / Asistente Virtual
                <div class="chat-header-icons">
                    <button id="minimize-chat-btn" title="Minimizar">
                        <svg viewBox="0 0 24 24"><path d="M20,14H4V10H20" /></svg>
                    </button>
                    <button id="close-chat-btn" title="Cerrar y borrar historial">
                        <svg viewBox="0 0 24 24"><path d="M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z" /></svg>
                    </button>
                </div>
            </div>
            <div class="chat-messages" id="chat-messages"></div>
            <div class="chat-input-area">
                <form class="input-frame" id="chat-form">
                    <div class="input-frame-inner">
                        <input type="text" id="user-input" placeholder="Pregunte por nuestras propiedades..." autocomplete="off" required>
                        <button id="send-button" title="Enviar mensaje">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        const N8N_WEBHOOK_URL = 'https://n8n.jeskocloud.online/webhook/1fb4b168-aeaa-477c-8b4a-becf9251ad57';

        const openChatMainBtn = document.getElementById('open-chat-main');
        const chatWidget = document.getElementById('chat-widget');
        const chatBubbleBtn = document.getElementById('chat-bubble-button');
        const minimizeBtn = document.getElementById('minimize-chat-btn');
        const closeBtn = document.getElementById('close-chat-btn');
        
        function toggleChat() { chatWidget.classList.toggle('active'); }
        function openChat() { chatWidget.classList.add('active'); }
        function closeChat() { chatWidget.classList.remove('active'); }
        function resetChat() {
            closeChat();
            setTimeout(() => {
                chatMessages.innerHTML = '';
                addMessage('Bienvenido a Terranova. Soy su asistente virtual, ¿en qué puedo ayudarle hoy?', 'bot');
            }, 400); 
        }

        openChatMainBtn.addEventListener('click', openChat);
        chatBubbleBtn.addEventListener('click', toggleChat);
        minimizeBtn.addEventListener('click', closeChat);
        closeBtn.addEventListener('click', resetChat);
        
        const chatMessages = document.getElementById('chat-messages');
        const userInput = document.getElementById('user-input');
        const chatForm = document.getElementById('chat-form');
        
        function addMessage(text, sender) {
            const messageElement = document.createElement('div');
            messageElement.classList.add('message', `${sender}-message`);
            messageElement.textContent = text;
            chatMessages.appendChild(messageElement);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        async function handleFormSubmit(event) {
            event.preventDefault();
            const messageText = userInput.value.trim();
            if (messageText === '') return;
            addMessage(messageText, 'user');
            userInput.value = '';
            
            try {
                const response = await fetch(N8N_WEBHOOK_URL, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ message: messageText })
                });
                if (!response.ok) throw new Error(`HTTP Error: ${response.status}`);
                const data = await response.json();
                addMessage(data.reply || 'No he recibido una respuesta válida.', 'bot');
            } catch (error) {
                console.error('Fallo la comunicación con n8n:', error);
                addMessage('Lo siento, ocurrió un error de conexión.', 'bot');
            }
        }
        
        chatForm.addEventListener('submit', handleFormSubmit);
        addMessage('Bienvenido a Terranova. Soy su asistente virtual, ¿en qué puedo ayudarle hoy?', 'bot');
    </script>
</body>
</html>
